webpackJsonp([16],{"1f/U":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container",attrs:{"data-current":e.current}},[o("div",{staticClass:"top-nav"},[o("ul",[o("li",[o("nuxt-link",{attrs:{to:"/",exact:""}},[o("i",{staticClass:"material-icons"},[e._v("home")])])],1)])]),o("nuxt-link",{attrs:{to:"/history"}},[o("div",{staticClass:"back-button nav-button"},[o("i",{staticClass:"material-icons"},[e._v("keyboard_arrow_left")])])]),e._m(0),e._m(1),o("div",{attrs:{id:"dat"}}),e._m(2),o("div",{attrs:{id:"boneInfo"}}),o("div",{attrs:{id:"bonemap"}},e._l(e.bones,function(t,a,n){return o("div",{staticClass:"bone-parts",attrs:{"data-bone":a.replace(" ","_")},on:{mousedown:e.boneMouseDown,touchstart:e.boneMouseDown}},[o("img",{class:t.sizeClass,attrs:{id:"map_skull",src:"/images/kruzof/bones/"+a.toLowerCase()+".png"}}),o("div",{staticClass:"bone-mask",style:"-webkit-mask-image:url(/images/kruzof/bones/"+a.toLowerCase()+".png)"})])})),o("script",{attrs:{type:"text/javascript",src:"../js/kruzof.js"}})],1)};a._withStripped=!0;var n={render:a,staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"glFullscreen"}},[t("canvas",{attrs:{id:"example"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"boneDrag"}},[t("img",{attrs:{id:"boneDragImg",src:"/images/kruzof/bones/skull.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"boneName"}},[this._v("\n    Kruzof\n    "),t("div",{attrs:{id:"feedback"}})])}]};t.a=n},eF9u:function(e,t,o){var a=o("h1Ur");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o("rjj0")("1eee5e40",a,!1,{sourceMap:!1})},fbQQ:function(e,t,o){"use strict";this.current;console.log(this.current,"current"),Velocity.RegisterEffect("trans.slideUpIn",{defaultDuration:800,easing:"easeOutBack",calls:[[{opacity:[1,0],translateY:[0,50]}]]});t.a={components:{},asyncData:function(e){return{animals:e.env.animals,catImages:{Fish:"/images/fish2-back.jpg",Salmon:"/images/salmon-back.jpg",Invertebrates:"/images/crab-back.jpg",Mammals:"/images/mammal-back.jpg"},bones:{Scapula:{},Basihyoid:{},Sternal_Ribs:{},Ulna:{},Skull:{},Humerus:{},Ribs:{},Pelvis:{},Caudal_Vertebrae:{sizeClass:"half"},Cervical_Vertebrae:{},Chevrons:{sizeClass:"half"},Stylohyoid:{},Thoracic_Vertebrae:{sizeClass:"full"},Sternum:{},Digits:{},Metacarpal:{},Lumbar_Vertebrae:{sizeClass:"full"},Radius:{}},current:e.route.name,category:e.params.category,someObject:{width:2,height:3,top:1,left:0,img:1,categoryColor:"d"}}},plugins:[{src:"../js/kruzof.js",ssr:!1}],head:function(){return{title:this.name,script:[{src:"../js/three/build/three.min.js"},{src:"../js/three/controls/OrbitControlsSmooth.js"},{src:"../js/three/controls/DragControls.js"},{src:"../js/three/loaders/LoaderSupport.js"},{src:"../js/three/loaders/OBJLoader2.js"}]}},mounted:function(){},methods:{boneMouseDown:function(e){app.addBoneEvent=this.addBoneEvent,console.log("bonedown"),app.boneGrabbed=!0,app.selectedBone=e.target;var t=document.getElementById("boneDrag");app.dragListener=function(e){var o,a;o=event.changedTouches?event.changedTouches[0].screenX:e.pageX,a=event.changedTouches?event.changedTouches[0].screenY:e.pageY,t.style.left=o+20-t.clientWidth/2+"px",t.style.top=a-t.clientHeight/2+"px"};t=document.getElementById("boneDrag");var o,a,n=document.getElementById("boneDragImg"),i=(app.selectedBone.getAttribute("data-bone").replace(" ","_"),app.selectedBone.getElementsByTagName("img")[0]);n.src=i.src,console.log(app.selectedBone.getElementsByTagName("img")[0].classList,"width"),i.classList.contains("half")?t.style.width=app.selectedBone.getBoundingClientRect().width+"px":t.style.width=i.width+"px",i.classList.contains("half")?t.style.height=app.selectedBone.getBoundingClientRect().height:t.style.height=i.height+"px",o=event.changedTouches?event.changedTouches[0].screenX:event.pageX,a=event.changedTouches?event.changedTouches[0].screenY:event.pageY,t.style.left=o+20-t.clientWidth/2+"px",t.style.top=a-t.clientHeight/2+"px",Velocity(t,{opacity:1,scale:1.35},{easing:[200,15],duration:400}),document.addEventListener("mousemove",app.dragListener),document.addEventListener("touchmove",app.dragListener)},addBoneEvent:function(e,t,o){var a,n;console.log(this,"thisss",window);var i=!0,r=document.getElementById("boneName"),s=e.getAttribute("data-bone").replace(" ","_"),l=e,c=!1,d=app.orca.getObjectByName(s);console.log("addbone",e,app,app.orca.getObjectByName(s));var p=new THREE.Mesh(app.orca.getObjectByName(s).geometry.clone(),app.orca.getObjectByName(s).material);p.name="puzzle"+app.orca.getObjectByName(s).name,app[p.name]={};var m=new THREE.MeshLambertMaterial({color:"#11619e"});p.material=m,p.geometry.computeBoundingBox();p.geometry.boundingBox;app.scene.add(p),p.position.copy(d.matrixWorld.getPosition());var u=new THREE.Plane,g=new THREE.Raycaster,b=new THREE.Vector2,y=new THREE.Vector3,h=new THREE.Vector3,f=null;f=p,d.updateMatrixWorld(),app.orca.updateMatrixWorld(),d.updateMatrixWorld();var x=new THREE.Object3D;x.add(p),p.geometry.center(),app.scene.add(x);var v,E,w=new THREE.Vector3;if(app.scene.updateMatrixWorld(),app.orca.getObjectByName(s).getWorldPosition(w),w.setFromMatrixPosition(app.orca.getObjectByName(s).matrixWorld),console.log("placeboneafter",d.matrixWorld.getPosition(),app.orca.matrixWorld.getPosition(),_,x.matrixWorld.getPosition()),console.log("matrix",d.matrixWorld.getPosition()),b.x=t,b.y=o,g.setFromCamera(b,app.camera),g.ray.intersectPlane(u,h)){(w=new THREE.Vector3).applyMatrix4(d.matrixWorld);var k=new THREE.SphereGeometry(1,32,32),B=new THREE.MeshBasicMaterial({color:16776960}),C=new THREE.Mesh(k,B);console.log(p.position,"po"),console.log(p.position,"po2"),C.material=B,C.position.copy(h);var V=new THREE.Vector3;app.scene.updateMatrixWorld(),d.updateMatrixWorld(),V.copy(d.matrixWorld.getPosition());var T=C.position.x-V.x,j=C.position.y-V.y,z=C.position.z-V.z;(w=new THREE.Vector3).copy(h),console.log("placebone",f.position,w,d.position,h,T,j,z),y.copy(h).sub(V),p.position.copy(h),p.scale.set(.8,.8,.8),function(e,t,o){console.log(e.scale,"scale");var a=e.scale.x,n=e.scale.y,i=e.scale.z,r=t-a,s=t-n,l=t-i;document.getElementById("example");Velocity(o,{tween:[1,0]},{duration:400,easing:[350,17],progress:function(t,o,c,d,p){console.log(e.scale,"scale"),e.scale.x=a+r*p,e.scale.y=n+s*p,e.scale.z=i+l*p}})}(p,1,document.body),d.geometry.computeBoundingBox();var M=d.geometry.boundingBox;console.log(d,M),(w=new THREE.Vector3).subVectors(M.max,M.min),w.multiplyScalar(.5),w.add(M.min),w.applyMatrix4(d.matrixWorld);M=p.geometry.boundingBox;var R=new THREE.Vector3;R=p.position;var H=w.distanceTo(R);console.log(R,w,"evennnn",H,i),H<.8&&1==i&&(i=!1,a(w,p,R,document.body),n(p,0,document.body),l.classList.add("disabled"),c=!0),app.orca.updateMatrixWorld();var _=new THREE.Vector3;app.scene.updateMatrixWorld(),d.updateMatrixWorld(),console.log("placeboneafter",d.matrixWorld.getPosition(),_,C.matrixWorld.getPosition(),f.matrixWorld.getPosition(),h,p.position,"sphere")}function n(e,t,o){var a,n,i,r=new THREE.MeshLambertMaterial({color:"#6f6f6f"}),s=new THREE.Color(r.color.getHex()),l=new THREE.MeshLambertMaterial({color:"#11619e"}),c=new THREE.Color(l.color.getHex());e.material.opacity;a=s.r-c.r,n=s.g-c.g,i=s.b-c.b,console.log(a,n,i,s.r,c.r,"r",s.g,c.g,"g",s.b,c.b,"b","deltas");document.getElementById("example");Velocity(o,{tween:[1,0]},{duration:400,progress:function(t,o,r,s,l){!1,e.material.depthWrite=!1,d.material.color.r=c.r+a*l,d.material.color.g=c.g+n*l,d.material.color.b=c.b+i*l},complete:function(e){}})}function a(e,t,o,a){var n=o.x,i=o.y,r=o.z,s=e.x-n,c=e.y-i,p=e.z-r;document.getElementById("example");Velocity(a,{tween:[1,0]},{duration:600,progress:function(e,o,a,l,d){t.position.x=n+s*d,t.position.y=i+c*d,t.position.z=r+p*d},complete:function(e){Velocity(l.querySelectorAll(".bone-mask"),{backgroundColor:"#000000",opacity:.3},{duration:400}),d.material=new THREE.MeshLambertMaterial({color:"#11619e"}),d.material.transparent=!1,d.material.opacity=1,console.log(d.material),t.material.opacity=0,Velocity(l.querySelectorAll("img"),{opacity:0},{duration:400})}})}Velocity(e.querySelectorAll(".bone-mask"),{opacity:1},{duration:100}),Velocity(r,{translateY:[-10,0],opacity:0},{duration:300,easing:"easeOutBack",complete:function(e){console.log(r,e,"toooo"),r.innerHTML=s.replace("_"," ")}}),Velocity(r,{translateY:[10,0]},{duration:0}),Velocity(r,{translateY:[0,10],opacity:1},{duration:300,easing:"easeOutBack"}),console.log(p,"puxxlebone"),app.orca.getObjectByName(s).geometry.boundingBox;w=new THREE.Vector3,M=d.geometry.boundingBox;d.geometry.computeBoundingBox();M=d.geometry.boundingBox;function S(e){v.geometry.boundingBox;var t=new THREE.Vector3;t=v.position,w.distanceTo(t)<.8&&1==i&&(i=!1,app[p.name].dragControls.enabled=!1,a(w,p,t,document.body),n(p,0,document.body),l.classList.add("disabled"),c=!0),E=requestAnimationFrame(S)}(w=new THREE.Vector3).subVectors(M.max,M.min),w.multiplyScalar(.5),w.add(M.min),w.applyMatrix4(d.matrixWorld);var N=[];N.push(p),v=p,0==c&&(console.log("createControls"),app[p.name].dragControls=new THREE.DragControls(N,app.camera,app.renderer.domElement),app[p.name].dragControls.addEventListener("dragstart",function(e){S(),app.controls.enabled=!1}),app[p.name].dragControls.addEventListener("dragend",function(e){cancelAnimationFrame(E),app.controls.enabled=!0,1==c&&(console.log(this,"thecontrols"),this.removeEventListener("dragstart"),this.removeEventListener("dragend"),this.enabled=!1,this.deactivate(),c=!1)}),console.log(app[p.name].dragControls))},addBone:function(e){document.getElementById("boneName");var t=e.target.getAttribute("data-bone").replace(" ","_");e.target;this.addBoneEvent(e.target),console.log(t,"bone",e.target,this)},beforeEnter:function(e){console.log("beforeenter",e);var t=document.getElementsByClassName("animal-type-heading")[0];document.getElementsByClassName("animal-type-heading")[0];console.log("beforeenter",e,t),Velocity(t,{translateX:"-50px",opacity:0},{duration:0})},enter:function(e,t){console.log("enter",e);var o=document.getElementsByClassName("animal-type-heading")[0],a=(document.getElementsByClassName("animals-back-img")[0],document.getElementsByClassName("overlay-w")[0]),n=document.getElementsByClassName("row")[0],i=document.querySelectorAll(".animal-tile"),r=document.querySelectorAll(".animal-name-back");a.style.background=this.someObject.overlayColor,console.log(r,a,"background");var s=this.someObject.categoryColor;o.style.opacity=0,n.style.opacity=0,Velocity(o,{translateY:"10px"},{duration:0}),Velocity(n,{opacity:1},{duration:0}),Velocity(i,{translateY:"50px",opacity:0},{duration:0}),Velocity(o,{opacity:1,translateY:"0px"},{duration:400,easing:"easeInOutSine"}),Velocity(r,{backgroundColor:s,color:s},{duration:0}),Velocity(i,"trans.slideUpIn",{duration:800,stagger:75,drag:!0,easing:"easeOutBack",complete:function(e){t()}})},beforeLeave:function(e){console.log("beforeleave",e)},leave:function(e,t){console.log("leave",e);var o=document.getElementsByClassName("animal-type-heading")[0],a=document.getElementsByClassName("row")[0];document.querySelectorAll(".animal-tile"),document.getElementsByClassName("animals-back-img")[0];Velocity(o,{opacity:0,translateY:"-10px"},{duration:400,easing:"easeInOutSine"}),Velocity(a,{translateY:"-50px",opacity:0},{duration:400,easing:"easeOutBack",complete:function(e){t()}})},animalClass:function(e,t){function o(e,t){var o=parseInt(e.slice(1),16),a=t<0?0:255,n=t<0?-1*t:t,i=o>>16,r=o>>8&255,s=255&o;return"#"+(16777216+65536*(Math.round((a-i)*n)+i)+256*(Math.round((a-r)*n)+r)+(Math.round((a-s)*n)+s)).toString(16).slice(1)}var a=document.getElementById("start"),n=(document.getElementById("end"),document.getElementsByClassName("top-nav")[0]),i=document.getElementsByClassName("back-button")[0],r=e.target.getAttribute("data-hue"),s=e.target.getAttribute("data-hex"),l=document.querySelectorAll(".animal-name-back"),c=document.querySelector(".animals-back-img img:not(.active)");c.src=this.catImages[e.target.getAttribute("data-category")];var d=document.querySelector(".animals-back-img img.active");console.log(e.target,c,d,"ANimallssss"),c.classList.add("active"),d.classList.remove("active");var p="hsl("+r+",73%,22%)",m=o(s,.2),u=o(s,.4),g=o(s,.4),b=o(s,-.5);console.log("hue",e.target,p,g,b,l),Velocity(a,{stopColor:g},{duration:500,easing:"easeInOutSine"}),Velocity(end,{stopColor:b},{duration:500,easing:"easeInOutSine"}),n.style.backgroundColor=p,Velocity(i,{backgroundColor:b},{duration:500,easing:"easeInOutSine"}),this.$set(this.someObject,"categoryColor",u),this.$set(this.someObject,"overlayColor",m)}}}},h1Ur:function(e,t,o){(e.exports=o("FZ+f")(!1)).push([e.i,"*{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body{font-family:Sofia;background-color:linear-gradient(180deg,#1e5799 0,#7db9e8);color:#fff;margin:0;padding:0;border:none;cursor:default;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.bone-parts{padding:5px;position:relative;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.bone-parts,.bone-parts img{display:-webkit-box;display:-ms-flexbox;display:flex}.bone-parts img{pointer-events:none}.half{zoom:50%}.bone-mask{blend-mode:darken;top:0;left:0;width:100%;height:100%;background:#11619e;display:relative;-webkit-mask-position:center;mask-position:center;-webkit-mask-size:initial;mask-size:auto;opacity:0;-webkit-mask-repeat:no-repeat;mix-blend-mode:hard-light}#boneName,.bone-mask{position:absolute;pointer-events:none}#boneName{color:#fff;font-family:Sofia;line-height:1;top:120px;width:25%;text-align:center;z-index:100;right:20px;display:block;font-size:80px;font-weight:700;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#bonemap{position:absolute;bottom:0;left:0;width:100%;height:225px;background-color:rgba(0,0,0,.3);display:block;z-index:2;padding:20px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:wrap;flex-wrap:wrap;font-size:0}#boneName a{color:red;font-weight:700;text-decoration:underline;cursor:pointer}#glFullscreen{width:100%;height:100vh;min-width:640px;min-height:360px;position:relative;overflow:hidden;z-index:0}#example{width:100%;height:100%;top:0;left:0}#feedback{color:#ff8c00;font-size:12px}#dat{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;left:0;top:0;z-Index:200}#boneDrag{position:absolute;top:0;left:40px;width:260px;height:260px;z-index:300;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;display:-webkit-box;display:-ms-flexbox;display:flex;pointer-events:none;opacity:0}#boneDrag img{width:100%;height:auto;display:inline;vertical-align:middle;display:-webkit-box;display:-ms-flexbox;display:flex;display:1;-ms-flex-item-align:center;align-self:center}.disabled{pointer-events:none}",""])},xDwb:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("fbQQ"),n=o("1f/U"),i=!1;var r=function(e){i||o("eF9u")},s=o("VU/8")(a.a,n.a,!1,r,null,null);s.options.__file="pages/kruzofpuzzle.vue",t.default=s.exports}});